<!-- src/main/resources/templates/factura/desgloseFactura.html -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      xmlns:th="http://www.thymeleaf.org">
    
    <head th:replace="~{layout/plantilla :: head}">
        <meta charset="UTF-8">
        <title>Desglose de Factura</title>
    </head>

    <body>
        <header th:replace="~{layout/plantilla :: header}"></header>

        <div class="container mt-5">
            <div class="card">
                <div class="card-header">
                    <h1 class="text-center">Desglose de Factura</h1>
                </div>
                <div class="card-body">
                    <div class="mb-4">
                        <h3>Información del Cliente</h3>
                        <p><strong>Nombre:</strong> <span th:text="${usuario.nombre}"></span></p>
                        <p><strong>Correo:</strong> <span th:text="${usuario.correo}"></span></p>
                    </div>
                    <div class="mb-4">
                        <h3>Productos</h3>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center" th:each="item : ${items}">
                                <span>
                                    <strong th:text="${item.nombreProducto}"></strong> - 
                                    <span th:text="${item.cantidad}"></span> x 
                                    ₡<span th:text="${item.precio}"></span>
                                </span>
                                <span>₡<span th:text="${item.cantidad * item.precio}"></span></span>
                            </li>
                        </ul>
                        <p class="mt-3"><strong>Total:</strong> ₡<span th:text="${total}"></span></p>
                    </div>
                    <div class="text-center">
                        <button class="btn btn-primary me-2" th:onclick="|window.location.href='/carrito/imprimirFactura'|">
                            <i class="fas fa-print"></i> Imprimir Factura
                        </button>
                        <button class="btn btn-secondary me-2" th:onclick="|window.location.href='/carrito/enviarFactura'|">
                        <i class="fas fa-envelope"></i> Enviar por Correo
                        </button>
                        <!-- Botón Volver -->
                        <button class="btn btn-light" onclick="history.back()">
                            <i class="fas fa-arrow-left"></i> Volver
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <footer th:replace="~{layout/plantilla :: footer}"></footer>
    </body>
</html>
